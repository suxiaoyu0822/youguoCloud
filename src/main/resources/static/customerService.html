<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>客服中心</title>
	<link rel="stylesheet" href="./css/admin_for_cs.css">
	<link rel="stylesheet" href="./js/layui/css/layui.css">
	<link rel="stylesheet" href="./css/layim.css">
	<link rel="stylesheet" href="./css/layout.css">
	<link rel="stylesheet" href="./js/jquery-ui-1.12.1/jquery-ui.css">
	<link rel="stylesheet" href="./css/clientService.css">
	<link rel="stylesheet" href="./css/font-awesome.css">

	<script src="./js/jquery-3.1.1.min.js"></script>
	<script src="./js/vue.js"></script>
	<script src="./js/layui/layui.js"></script>
	<script src="./js/jquery-ui-1.12.1/jquery-ui.js"></script>
	<script src="./js/jquery.cookie.js"></script>
	<script src="./js/echarts.min.js"></script>
	<script src="./js/masonry-docs.min.js"></script>
</head>

<body>
	<div style="overflow:hidden;">
		<div class="header">
			<img id="logo" src="img/logo.png">
			<span style="line-height: 50px;font-size:20px;">客服中心 <span style="font-size:22px"> | </span>全渠道整合智能在线客服</span>
			<div class="headBar layui-form">
				<span>欢迎您，客服人员：</span>
				<span id="headBar-name">kefu009</span>
				<input type="checkbox" name="onlineSwitch" lay-skin="switch" lay-text="在线|离线" checked>
				<a href="#">登出</a>
			</div>
		</div>
		<div class="leftNavBar">
			<div id="navtab-chat" class="tab chosed"><i class="layui-icon icon">&#xe63a;</i></div>
			<div id="navtab-dashboard" class="tab"><i class="layui-icon icon">&#xe628;</i></div>
			<div id="navtab-knowledge" class="tab"><i class="layui-icon icon">&#xe62a;</i></div>
			<div id="navtab-client" class="tab"><i class="layui-icon icon">&#xe613;</i></div>
			<div id="navtab-setting" class="tab"><i class="layui-icon icon">&#xe620;</i></div>
		</div>
		<div id="outContent">
			<div id="content" style="width:100%;height:100%;">
				<div class="full" id="chatApp">
					<div id="chatLeft">
						<div id="chatLeft-top">
							<blockquote class="layui-elem-quote" style="font-size: 18px">当前会话</blockquote>
							<button class="layui-btn layui-btn-small" id="btn-newTalk" onclick="newTalk()"><i class="layui-icon">&#xe608;</i>接入新会话</button>
						</div>
						<div id="chatLeft-list">
							<div class="chatLeft-list-item" v-for="conversation in conversationList" @click="chooseConversation(conversation)" :class="{'item-chosed': (currentConversation==conversation) }">
								<img class="chatLeft-list-item-avatar" :src="conversation.avatar">
								<div class="chatLeft-list-item-name">{{ nickNameManager[1][conversation.userId] }}</div>
								<div class="chatLeft-list-item-time">{{ conversation.msgList.length-1 >=0 ? conversation.msgList[conversation.msgList.length-1].time.Format('hh:mm') :null
									}}
								</div>
								<div class="chatLeft-list-item-msg">{{ conversation.msgList.length-1 >=0 ? conversation.msgList[conversation.msgList.length-1].content :null }}</div>
								<div class="chatLeft-list-item-reddot" v-if="conversation.hasNewMsg"></div>
							</div>

						</div>
					</div>
					<div id="chatMain">
						<div id="chatMain-head">
							<img class="chatMain-head-avatar" :src="currentConversation==null ? 'img/tx.png' : currentConversation.avatar">
							<span class="chatMain-head-name">{{ nickNameManager[1][currentConversation.userId] }}</span>
							<div class="chatMain-head-btnGroup">
								<button class="layui-btn layui-btn-primary layui-btn-small" onclick="openTransferWindow()">转接会话</button>
								<button class="layui-btn layui-btn-danger layui-btn-small" @click="endConversation(currentConversation)">结束会话</button>
							</div>
						</div>
						<div id="chatMain-msgList">
							<div class="layim-chat-main">
								<ul>
									<li v-for="msg in currentConversation.msgList" :class="{'layim-chat-mine': !msg.fromClient }">
										<div class="layim-chat-user">
											<img src="img/tx.png"><cite>{{ msg.fromClient==0 ? null : nickNameManager[1][msg.senderId] }}<i>{{ msg.time.Format('yyyy-MM-dd hh:mm:ss') }}</i>{{ msg.fromClient==0 ? nickNameManager[0][msg.senderId] : null }}</cite>
										</div>
										<div class="layim-chat-text" v-html="msg.content">

										</div>
									</li>

								</ul>
							</div>
						</div>
						<form class="layui-form">
							<textarea class="layui-textarea layui-hide" name="content" lay-verify="content" id="LAY_editor"></textarea>
						</form>
						<div class="chatMain-bottom">
							<button class="layui-btn" @click="sendChatMsg(currentConversation)">发送</button>
							<div class="chatMain-bottom-tip">按Enter发送消息，Shift+Enter换行</div>
						</div>
					</div>
					<div id="chatRight">
						<div id="chatRight-a">

							<div class="layui-tab layui-tab-card chatRight-tab" lay-filter="chatRight-a">
								<ul class="layui-tab-title" id="chatRight-a-tab">
									<li>用户资料</li>
									<li class="layui-this" lay-id="tab-zhishiku">知识库</li>
								</ul>
								<div class="layui-tab-content rin-tab-content" id="chatRight-a-content">
									<div class="layui-tab-item">
										<div v-if="clientDetailManager[currentConversation.userId] != null">
											<form class="layui-form layui-form-pane" action="">
												<center><button type="button" onclick="openClientSearch();" class="layui-btn layui-btn-small layui-btn-radius layui-btn-primary"
													    style="width:90%;">改变当前会话指向用户</button></center>
												<hr>
												<label class="layui-form-label rin-form-label">姓名</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].clientName"></input>
												</div>


												<label class="layui-form-label rin-form-label">性别</label>
												<div class="layui-input-block rin-input-block">
													<div style="height: 20px; line-height:22px; width: calc(100% - 2px); border: 1px solid #e6e6e6;">
														<input type="radio" class="rin-radio" name="sex" value="1" title="男" style="display:initial" lay-ignore v-model="clientDetailManager[currentConversation.userId].sex"><span>男</span>
														<input type="radio" class="rin-radio" name="sex" value="2" title="女" style="display:initial" lay-ignore v-model="clientDetailManager[currentConversation.userId].sex"><span>女</span>
														<input type="radio" class="rin-radio" name="sex" value="0" title="未知" style="display:initial" lay-ignore v-model="clientDetailManager[currentConversation.userId].sex"><span>未知</span>
													</div>
												</div>


												<label class="layui-form-label rin-form-label">电话</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].phoneNum"></input>
												</div>
												<label class="layui-form-label rin-form-label">电子邮箱</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].email"></input>
												</div>
												<label class="layui-form-label rin-form-label">微信</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].wx"></input>
												</div>
												<label class="layui-form-label rin-form-label">QQ</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].qq"></input>
												</div>
												<label class="layui-form-label rin-form-label">微博</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].weibo"></input>
												</div>
												<label class="layui-form-label rin-form-label">淘宝</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].taobao"></input>
												</div>
												<label class="layui-form-label rin-form-label">支付宝</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].alipay"></input>
												</div>
												<label class="layui-form-label rin-form-label">地址</label>
												<div class="layui-input-block rin-input-block">
													<input type="text" name="clientName" class="layui-input rin-input" v-model="clientDetailManager[currentConversation.userId].address"></input>
												</div>

												<div style="overflow: hidden;">
													<div style="float: right;">
														<button type="button" class="layui-btn layui-btn-small" @click="changeClientDetail(currentConversation)">更改</button>
														<button type="button" class="layui-btn layui-btn-primary layui-btn-small" @click="resetClientDetail(currentConversation)">重置</button>
													</div>
												</div>
											</form>
											<fieldset class="layui-elem-field layui-field-title" style="margin-bottom: 0px;">
												<legend style="font-size: 16px;">已添加的标签</legend>
												<div class="layui-field-box">
													<ul class="tagList">
														<li><button class="layui-btn layui-btn-radius layui-btn-primary layui-btn-mini" v-for="tag in clientDetailManager[currentConversation.userId].tagList"
															    @click="removeTag(currentConversation,tag,clientDetailManager[currentConversation.userId])">{{ tag }}</button></li>
													</ul>
												</div>
											</fieldset>
											<fieldset class="layui-elem-field layui-field-title" style="margin-bottom: 0px;">
												<legend style="font-size: 16px;">可添加的标签</legend>
												<div class="layui-field-box">
													<ul class="tagList">
														<li>
															<button class="layui-btn layui-btn-radius layui-btn-normal layui-btn-mini" v-for="tag in clientDetailManager[currentConversation.userId].recommandTagList"
															    @click="addTagRecommand(currentConversation,tag,clientDetailManager[currentConversation.userId])">{{ tag }}</button>
															<button class="layui-btn layui-btn-radius layui-btn-primary layui-btn-mini" v-for="tag in clientDetailManager[currentConversation.userId].unusedTagList"
															    @click="addTag(currentConversation,tag,clientDetailManager[currentConversation.userId])">{{ tag }}</button>
														</li>
													</ul>
												</div>
											</fieldset>
										</div>
									</div>
									<div class="layui-tab-item layui-show">
										<div>
											<div class="layui-input-inline" style="width: calc(80% - 6px);">
												<input type="text" id="knowledgeFastSearchInput" name="keyword" placeholder="请输入关键词" class="layui-input" style="height: 30px;line-height: 30px;">
											</div>
											<button type="button" class="layui-btn layui-btn-small" style="width: 20%;" onclick="knowledgeFastSearch()"><i class="layui-icon icon" style="line-height: 25px;">&#xe615;</i></button>
										</div>
										<div>
											<div class="fastKnowledgeItem" v-for="knowledge in currentConversation.knowledgeList" :style="{backgroundColor: knowledge.bgColor}"
											    @click="clickKnowledge(knowledge.answer)">
												<div class="fastKnowledgeItem-key"><span v-for="keyword in knowledge.keyWord">{{ keyword }}</span></div>
												<div class="fastKnowledgeItem-info">{{ knowledge.answer }}</div>
											</div>
										</div>
									</div>
								</div>
							</div>


						</div>
						<div id="chatRight-b">
							<div class="layui-tab layui-tab-card chatRight-tab" lay-filter="chatRight-b">
								<ul class="layui-tab-title">
									<li class="layui-this" lay-id="tab-changyongyu">常用语</li>
									<li>聊天记录</li>
								</ul>
								<div class="layui-tab-content rin-tab-content" id="chatRight-b-content">
									<div class="layui-tab-item layui-show" id="chatRight-b-content-1">
										<ul class="common-language">
											<li v-for="commonLang in commonLangManager.commonLangList" @click="commonLangManager.send(commonLang)">{{ commonLang.content }}</li>
										</ul>
									</div>
									<div class="layui-tab-item" id="chatRight-b-content-2">
										<div class="chatHistory">
											<div class="chatHistory-item" v-for="historyMsg in currentConversation.historyList">
												<div class="chatHistory-item-title"><span>{{ nickNameManager[historyMsg.fromClient][historyMsg.senderId] }}</span><span class="chatHistory-item-time">{{ historyMsg.time.Format('yyyy-MM-dd hh:mm:ss') }}</span></div>
												<div class="chatHistory-item-content">{{ historyMsg.content }}</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="full" style="display: none;" id="tongji">
					<div class="tongji-top">
						<img src="img/tx.png" class="tongji-top-avatar">
						<div style="margin:10px 30px;float:left">
							<div style="overflow:hidden;line-height:24px;margin-top:20px;">
								<div style="float:left; margin-right:32px; font-size:24px;">贷款咨询组王五</div>
								<i class="fa fa-star fa-lg" style="color:#e3cf7a"></i>
								<i class="fa fa-star fa-lg" style="color:#e3cf7a"></i>
								<i class="fa fa-star fa-lg" style="color:#e3cf7a"></i>
								<i class="fa fa-star fa-lg" style="color:#e3cf7a"></i>
								<i class="fa fa-star-o fa-lg" style="color:#e3cf7a"></i>
								<span style="margin-left:0.5em;">4.5分</span>
							</div>
							<div style="font-size:18px;margin-top:18px;">贷款咨询组</div>
						</div>
					</div>
					<fieldset class="layui-elem-field layui-field-title">
						<legend>今日统计</legend>
						<div class="layui-field-box" style="overflow:hidden;">
							<div style="overflow:hidden;">
								<div class="overview-div">
									<div class="overview-num-div panel-success">
										<i class="fa fa-bar-chart pull-left"></i>
										<span class="total">我的会话数/排名</span>
										<span class="total-num">46/4</span>
									</div>
								</div>
								<div class="overview-div">
									<div class="overview-num-div panel-info">
										<i class="fa fa-bar-chart pull-left"></i>
										<span class="total">我的服务时长/排名</span>
										<span class="total-num">11/3</span>
									</div>
								</div>
								<div class="overview-div">
									<div class="overview-num-div panel-primary">
										<i class="fa fa-bar-chart pull-left"></i>
										<span class="total">我的平均评价/排名</span>
										<span class="total-num">4.5/1</span>
									</div>
								</div>
								<div class="overview-div">
									<div class="overview-num-div panel-warning">
										<i class="fa fa-bar-chart pull-left"></i>
										<span class="total">今日会话总数</span>
										<span class="total-num">188</span>
									</div>
								</div>
							</div>
						</div>
					</fieldset>
					<fieldset class="layui-elem-field layui-field-title">
						<legend>会话统计</legend>
						<div class="layui-field-box">
							<div class="panel rin-panel">
								<div class="panel-heading">
									<i class="fa fa-line-chart pull-left"></i> &nbsp;近24小时接待状况
								</div>
								<div class="panel-body">
									<div id="dayInfo" style="width: 100%; height: 300px; float:left;"></div>
								</div>
							</div>
							<div class="panel rin-panel">
								<div class="panel-heading">
									<i class="fa fa-line-chart pull-left"></i> &nbsp;近24小时接待状况
								</div>
								<div class="panel-body">
									<div id="weekInfo" style="width: 100%; height: 300px; float:left;"></div>
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<div class="full sunqi" style="display: none;background-color: #f0f3f3;overflow: auto;">
					<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
					  <ul class="layui-tab-title">
					    <li class="layui-this">知识库管理</li>
					    <li>常用语管理</li>
					  </ul>
					  <div class="layui-tab-content">
					  	<div class="layui-tab-item layui-show">
					  		<div class="row">
					  		    <div class="col-lg-12">
					  		        <div class="panel">
					  		            <div class="panel-heading">
					  		                <div class="btn-local-left">
					  		                    <button class="layui-btn layui-btn-normal" id="addKnowledgeBaseBtn">添加知识</button>
					  		                </div>
					  		                <div class="search-local-right">
					  		                    <!-- <div class="btn-local-left">
					  		                                <button class="layui-btn layui-btn-primary" id="filterKnowledgeBaseBtn">
					  		                                    <i class="fa fa-filter"></i>&nbsp;筛选
					  		                                </button>
					  		                            </div> -->
					  		                    <div class="search">
					  		                        <div class="search-div" id="searchKnowledgeBaseDiv">
					  		                            <input type="search" name="" value="">
					  		                        </div>
					  		                        <div class="search-icon-div" id="searchKnowledgeBaseBtn">
					  		                            <div class="search-icon">
					  		                                <i class="layui-icon"></i>
					  		                            </div>
					  		                        </div>
					  		                    </div>
					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		</div>
					  		<div class="row" id="masonry" style="position: relative; height: 742px;">
					  		    <div class="col-lg-3" style="position: absolute; left: 0px; top: 0px;">
					  		        <div class="panel">
					  		            <div class="panel-body">
					  		                <div class="close-local">
					  		                    <i class="fa fa-pencil editKnowledge" knowledgeid="4" title="编辑"></i>
					  		                    <i class="layui-icon close-btn deteleKnowledge" knowledgeid="4" title="删除">ဆ</i>
					  		                </div>
					  		                <div class="level" level="1">
					  		                    类别： 公司
					  		                </div>
					  		                <div class="ques" ques="转接到人工客服">
					  		                    问题： 转接到人工客服
					  		                </div>
					  		                <div class="ans" ans="正在为您转接人工客服，请稍后……">
					  		                    答案： 正在为您转接人工客服，请稍后……
					  		                </div>
					  		                <div class="tags">

					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		    <div class="col-lg-3" style="position: absolute; left: 243px; top: 0px;">
					  		        <div class="panel">
					  		            <div class="panel-body">
					  		                <div class="close-local">
					  		                    <i class="fa fa-pencil editKnowledge" knowledgeid="24" title="编辑"></i>
					  		                    <i class="layui-icon close-btn deteleKnowledge" knowledgeid="24" title="删除">ဆ</i>
					  		                </div>
					  		                <div class="level" level="1">
					  		                    类别： 公司
					  		                </div>
					  		                <div class="ques" ques="本公司的楼盘信息？">
					  		                    问题： 本公司的楼盘信息？
					  		                </div>
					  		                <div class="ans" ans="您好，我们是黑曜石售楼部的，我们这里有不限购不限贷的，70年产权的多层电梯洋房，自住投资都可以，低至8000元/平方喔。">
					  		                    答案： 您好，我们是黑曜石售楼部的，我们这里有不限购不限贷的，70年产权的多层电梯洋房，自住投资都可以，低至8000元/平方喔。
					  		                </div>
					  		                <div class="tags">

					  		                    <div class="tag">
					  		                        房产

					  		                    </div>
					  		                    <div class="tag">
					  		                        售楼

					  		                    </div>
					  		                    <div class="tag">
					  		                        买房

					  		                    </div>
					  		                    <div class="tag">
					  		                        洋房

					  		                    </div>
					  		                    <div class="tag">
					  		                        楼盘

					  		                    </div>
					  		                    <div class="tag">
					  		                        信息

					  		                    </div>
					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		    <div class="col-lg-3" style="position: absolute; left: 486px; top: 0px;">
					  		        <div class="panel">
					  		            <div class="panel-body">
					  		                <div class="close-local">
					  		                    <i class="fa fa-pencil editKnowledge" knowledgeid="25" title="编辑"></i>
					  		                    <i class="layui-icon close-btn deteleKnowledge" knowledgeid="25" title="删除">ဆ</i>
					  		                </div>
					  		                <div class="level" level="1">
					  		                    类别： 公司
					  		                </div>
					  		                <div class="ques" ques="我们公司楼盘的具体位置？">
					  		                    问题： 我们公司楼盘的具体位置？
					  		                </div>
					  		                <div class="ans" ans="在北京南路与绕城南路交叉口，这个位置很好找的，地段很好！">
					  		                    答案： 在北京南路与绕城南路交叉口，这个位置很好找的，地段很好！
					  		                </div>
					  		                <div class="tags">

					  		                    <div class="tag">
					  		                        楼盘

					  		                    </div>
					  		                    <div class="tag">
					  		                        位置

					  		                    </div>
					  		                    <div class="tag">
					  		                        哪里

					  		                    </div>
					  		                    <div class="tag">
					  		                        哪儿

					  		                    </div>
					  		                    <div class="tag">
					  		                        哪个地方

					  		                    </div>
					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		    <div class="col-lg-3" style="position: absolute; left: 729px; top: 0px;">
					  		        <div class="panel">
					  		            <div class="panel-body">
					  		                <div class="close-local">
					  		                    <i class="fa fa-pencil editKnowledge" knowledgeid="26" title="编辑"></i>
					  		                    <i class="layui-icon close-btn deteleKnowledge" knowledgeid="26" title="删除">ဆ</i>
					  		                </div>
					  		                <div class="level" level="1">
					  		                    类别： 公司
					  		                </div>
					  		                <div class="ques" ques="买房的首付问题？">
					  		                    问题： 买房的首付问题？
					  		                </div>
					  		                <div class="ans" ans="不同户型的首付不同的哦，我们的首付最低十几万起喔，很实惠。">
					  		                    答案： 不同户型的首付不同的哦，我们的首付最低十几万起喔，很实惠。
					  		                </div>
					  		                <div class="tags">

					  		                    <div class="tag">
					  		                        买房

					  		                    </div>
					  		                    <div class="tag">
					  		                        首付

					  		                    </div>
					  		                    <div class="tag">
					  		                        户型

					  		                    </div>
					  		                    <div class="tag">
					  		                        多少钱

					  		                    </div>
					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		    <div class="col-lg-3" style="position: absolute; left: 0px; top: 236px;">
					  		        <div class="panel">
					  		            <div class="panel-body">
					  		                <div class="close-local">
					  		                    <i class="fa fa-pencil editKnowledge" knowledgeid="27" title="编辑"></i>
					  		                    <i class="layui-icon close-btn deteleKnowledge" knowledgeid="27" title="删除">ဆ</i>
					  		                </div>
					  		                <div class="level" level="1">
					  		                    类别： 公司
					  		                </div>
					  		                <div class="ques" ques="楼盘有哪些户型？">
					  		                    问题： 楼盘有哪些户型？
					  		                </div>
					  		                <div class="ans" ans="我们目前在售户型是78方（小户型）、120方（中户型）、135（大户型）方的都有，户型很方正的。">
					  		                    答案： 我们目前在售户型是78方（小户型）、120方（中户型）、135（大户型）方的都有，户型很方正的。
					  		                </div>
					  		                <div class="tags">

					  		                    <div class="tag">
					  		                        户型

					  		                    </div>
					  		                    <div class="tag">
					  		                        大户型

					  		                    </div>
					  		                    <div class="tag">
					  		                        小户型

					  		                    </div>
					  		                    <div class="tag">
					  		                        中户型

					  		                    </div>
					  		                    <div class="tag">
					  		                        平方

					  		                    </div>
					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		    <div class="col-lg-3" style="position: absolute; left: 486px; top: 371px;">
					  		        <div class="panel">
					  		            <div class="panel-body">
					  		                <div class="close-local">
					  		                    <i class="fa fa-pencil editKnowledge" knowledgeid="28" title="编辑"></i>
					  		                    <i class="layui-icon close-btn deteleKnowledge" knowledgeid="28" title="删除">ဆ</i>
					  		                </div>
					  		                <div class="level" level="1">
					  		                    类别： 公司
					  		                </div>
					  		                <div class="ques" ques="这一期楼盘有别墅吗">
					  		                    问题： 这一期楼盘有别墅吗
					  		                </div>
					  		                <div class="ans" ans="我们这期的楼盘有别墅、小高层和排屋，而且设计风格都很美观喔。">
					  		                    答案： 我们这期的楼盘有别墅、小高层和排屋，而且设计风格都很美观喔。
					  		                </div>
					  		                <div class="tags">

					  		                    <div class="tag">
					  		                        楼盘

					  		                    </div>
					  		                    <div class="tag">
					  		                        别墅

					  		                    </div>
					  		                    <div class="tag">
					  		                        小高层

					  		                    </div>
					  		                    <div class="tag">
					  		                        排屋

					  		                    </div>
					  		                    <div class="tag">
					  		                        一期

					  		                    </div>
					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		    <div class="col-lg-3" style="position: absolute; left: 729px; top: 371px;">
					  		        <div class="panel">
					  		            <div class="panel-body">
					  		                <div class="close-local">
					  		                    <i class="fa fa-pencil editKnowledge" knowledgeid="29" title="编辑"></i>
					  		                    <i class="layui-icon close-btn deteleKnowledge" knowledgeid="29" title="删除">ဆ</i>
					  		                </div>
					  		                <div class="level" level="1">
					  		                    类别： 公司
					  		                </div>
					  		                <div class="ques" ques="房贷的利息怎么样？">
					  		                    问题： 房贷的利息怎么样？
					  		                </div>
					  		                <div class="ans" ans="房贷的利息是根据您付的首付多少和其它情况来计算，一般情况下在4%左右。">
					  		                    答案： 房贷的利息是根据您付的首付多少和其它情况来计算，一般情况下在4%左右。
					  		                </div>
					  		                <div class="tags">

					  		                    <div class="tag">
					  		                        首付

					  		                    </div>
					  		                    <div class="tag">
					  		                        贷款

					  		                    </div>
					  		                    <div class="tag">
					  		                        利息

					  		                    </div>
					  		                    <div class="tag">
					  		                        房贷

					  		                    </div>
					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		    <div class="col-lg-3" style="position: absolute; left: 243px; top: 413px;">
					  		        <div class="panel">
					  		            <div class="panel-body">
					  		                <div class="close-local">
					  		                    <i class="fa fa-pencil editKnowledge" knowledgeid="30" title="编辑"></i>
					  		                    <i class="layui-icon close-btn deteleKnowledge" knowledgeid="30" title="删除">ဆ</i>
					  		                </div>
					  		                <div class="level" level="1">
					  		                    类别： 公司
					  		                </div>
					  		                <div class="ques" ques="楼盘质量怎么样">
					  		                    问题： 楼盘质量怎么样
					  		                </div>
					  		                <div class="ans" ans="我们开发的楼盘都是经过国内外知名设计师设计，然后用的都是高质量的建材，保证您买的放心，住的开心。">
					  		                    答案： 我们开发的楼盘都是经过国内外知名设计师设计，然后用的都是高质量的建材，保证您买的放心，住的开心。
					  		                </div>
					  		                <div class="tags">

					  		                </div>
					  		            </div>
					  		        </div>
					  		    </div>
					  		</div>

					  	</div>
					  	<div class="layui-tab-item">
					  		<div class="col-lg-12">
					  		            <div class="row">
					  		                <div class="panel" style="border:none;">
					  		                    <!-- <div class="panel-body"> -->
					  		                        <table width="100%">
					  		                            <tbody>
					  		                                <tr>
					  		                                    <td>
					  		                                        <div class="btn-local-left">
					  		                                            <button class="layui-btn layui-btn-normal" id="addCommonLanguageBtn">添加常用语</button>
					  		                                            <button class="layui-btn layui-btn-danger" id="deleteCommonLanguageBtn">删除常用语</button>
					  		                                        </div>
					  		                                        <!-- <div class="search-local-right">
					  		                                            <div id="searchCommonLanguageDiv" class="search">
					  		                                                <div class="search-div">
					  		                                                    <input type="search" name="" value="">
					  		                                                </div>
					  		                                                <div class="search-icon-div">
					  		                                                    <div class="search-icon">
					  		                                                        <i class="layui-icon">&#xe615;</i>
					  		                                                    </div>
					  		                                                </div>
					  		                                            </div>
					  		                                        </div> -->
					  		                                    </td>
					  		                                </tr>
					  		                                <tr>
					  		                                    <td height="20px" style="background:#F0F3F3"></td>
					  		                                </tr>
					  		                                <tr>
					  		                                    <td style="padding: 0px;">
					  		                                        <div class="table-div-top">
					  		                                            <div class="layui-form">
					  		                                                <table class="layui-table" lay-skin="line">
					  		                                                    <colgroup>
					  		                                                        <col width="50">
					  		                                                        <!-- <col width="200"> -->
					  		                                                        <col>
					  		                                                        <col width="100">
					  		                                                    </colgroup>
					  		                                                    <thead>
					  		                                                        <tr>
					  		                                                            <th><input type="checkbox" name="" lay-skin="primary" lay-filter="allChooseCommonLanguage"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div></th>
					  		                                                            <!-- <th>创建者</th> -->
					  		                                                            <th>常用语</th>
					  		                                                            <th>使用频率</th>
					  		                                                        </tr>
					  		                                                    </thead>
					  		                                                </table>
					  		                                            </div>
					  		                                        </div>
					  		                                        <div class="table-div-bottom">
					  		                                            <div class="layui-form">
					  		                                                <table class="layui-table" lay-skin="line">
					  		                                                    <colgroup>
					  		                                                        <col width="50">
					  		                                                        <col>
					  		                                                        <col width="100">
					  		                                                    </colgroup><tbody id="commonLanguage"><tr>
					  		                            <td><input type="checkbox" name="" lay-skin="primary" lay-filter="commonLanguage" commonlanguageid="2"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div></td>
					  		                            <td>您好!很高兴为您服务，有什么可以为您效劳的。</td>
					  		                            <td>13</td>
					  		                        </tr><tr>
					  		                            <td><input type="checkbox" name="" lay-skin="primary" lay-filter="commonLanguage" commonlanguageid="3"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div></td>
					  		                            <td>亲，您说的我的确无法办到。希望我下次能帮到您。</td>
					  		                            <td>12</td>
					  		                        </tr><tr>
					  		                            <td><input type="checkbox" name="" lay-skin="primary" lay-filter="commonLanguage" commonlanguageid="1"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div></td>
					  		                            <td>你好，请问我能帮助您什么？</td>
					  		                            <td>11</td>
					  		                        </tr><tr>
					  		                            <td><input type="checkbox" name="" lay-skin="primary" lay-filter="commonLanguage" commonlanguageid="4"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div></td>
					  		                            <td>呵呵，这真的让我很为难，我请示一下组长，看能不能给您一些折扣，不过估计有点难，亲，请您稍等!</td>
					  		                            <td>1</td>
					  		                        </tr><tr>
					  		                            <td><input type="checkbox" name="" lay-skin="primary" lay-filter="commonLanguage" commonlanguageid="5"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div></td>
					  		                            <td>好的！谢谢咨询！</td>
					  		                            <td>1</td>
					  		                        </tr><tr>
					  		                            <td><input type="checkbox" name="" lay-skin="primary" lay-filter="commonLanguage" commonlanguageid="6"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div></td>
					  		                            <td>我们的楼盘在北京南路与绕城南路交叉口，这个位置很好找的，地段很好！</td>
					  		                            <td>1</td>
					  		                        </tr><tr>
					  		                            <td><input type="checkbox" name="" lay-skin="primary" lay-filter="commonLanguage" commonlanguageid="7"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div></td>
					  		                            <td>再见</td>
					  		                            <td>0</td>
					  		                        </tr></tbody>
					  		                                                </table>
					  		                                            </div>
					  		                                        </div>
					  		                                    </td>
					  		                                </tr>
					  		                            </tbody>
					  		                        </table>
					  		                    <!-- </div> -->
					  		                </div>
					  		            </div>
					  		        </div>
					  	</div>
					  </div>
					</div>
				</div>
				<div class="full sunqi" style="display: none;background-color: #f0f3f3;overflow: auto;">
					<div class="col-lg-12">
					    <div class="row">
					        <div class="panel" style="border:none;margin-top: 20px;">
					            <!-- <div class="panel-body"> -->
					                <table width="100%">
					                    <tbody>
					                        <tr>
					                            <td>
					                                <div class="btn-local-left">
					                                    <button class="layui-btn layui-btn-normal" id="addCustomerBtn">添加客户</button>
					                                    <button class="layui-btn layui-btn-danger" id="deleteClientBtn">删除客户</button>
					                                </div>
					                                <div class="search-local-right">
					                                    <div id="searchClientDiv" class="search">
					                                        <div class="search-div">
					                                            <input type="search" name="" value="">
					                                        </div>
					                                        <div class="search-icon-div" id="searchClientBtn">
					                                            <div class="search-icon">
					                                                <i class="layui-icon">&#xe615;</i>
					                                            </div>
					                                        </div>
					                                    </div>
					                                </div>
					                            </td>
					                        </tr>
					                        <tr>
					                            <td height="20px" style="background:#F0F3F3"></td>
					                        </tr>
					                        <tr>
					                            <td style="padding: 0px;">
					                                <div class="table-div-top">
					                                    <table class="layui-table" id="clientTable" lay-skin="line">
					                                        <colgroup>
					                                            <!-- <col width="50"> -->
					                                            <!-- <col width="80">
					                                            <col width="60">
					                                            <col>
					                                            <col width="140">
					                                            <col width="140">
					                                            <col width="150"> -->
					                                            <col width="10.89%">
					                                            <col width="4.67%">
					                                            <col width="26.15%">
					                                            <col width="15.00%">
					                                            <col width="8.56%">
					                                            <col width="10.56%">
					                                            <col width="24.17%">
					                                        </colgroup>
					                                        <thead>
					                                            <tr>
					                                                <!-- <th><input type="checkbox" name="" lay-skin="primary" lay-filter="allChooseCustomer"></th> -->
					                                                <th>名字</th>
					                                                <th>性别</th>
					                                                <th>地址</th>
					                                                <th>标签</th>
					                                                <th>电话</th>
					                                                <th>email</th>
					                                                <th></th>
					                                            </tr>
					                                        </thead>
					                                    </table>
					                                </div>
					                                <div class="table-div-bottom">
					                                    <table class="layui-table" lay-skin="line">
					                                        <colgroup>
					                                            <col width="10.89%">
					                                            <col width="4.67%">
					                                            <col width="26.15%">
					                                            <col width="15.00%">
					                                            <col width="8.56%">
					                                            <col width="10.56%">
					                                            <col width="24.17%">
					                                        </colgroup>
					                                        <tbody id="client"><tr>
					                                                                        <td>王先生</td>
					                                                                        <td>男</td>
					                                                                        <td>江苏</td>
					                                                                        <td>中户型、大户型、大户型</td>
					                                                                        <td>89320102</td>
					                                                                        <td>821321@163.com</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="18" clientname="王先生" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="18" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>张先生</td>
					                                                                        <td>男</td>
					                                                                        <td>杭州</td>
					                                                                        <td>中户型</td>
					                                                                        <td>82321991</td>
					                                                                        <td>zhangsd@163.com</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="19" clientname="张先生" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="19" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>李女士</td>
					                                                                        <td>女</td>
					                                                                        <td>江西</td>
					                                                                        <td>大户型</td>
					                                                                        <td>67673456</td>
					                                                                        <td>lylyly@qq.com</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="20" clientname="李女士" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="20" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>孙先生</td>
					                                                                        <td>男</td>
					                                                                        <td>南京</td>
					                                                                        <td></td>
					                                                                        <td>63523434</td>
					                                                                        <td>sdasa@qq.com</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="21" clientname="孙先生" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="21" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>赵先生</td>
					                                                                        <td>男</td>
					                                                                        <td>上海</td>
					                                                                        <td></td>
					                                                                        <td>32432423</td>
					                                                                        <td>23213@126.com</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="22" clientname="赵先生" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="22" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>钱先生</td>
					                                                                        <td>男</td>
					                                                                        <td>广州</td>
					                                                                        <td></td>
					                                                                        <td>67657734</td>
					                                                                        <td>wd2321@qq.com</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="23" clientname="钱先生" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="23" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>姚先生</td>
					                                                                        <td>男</td>
					                                                                        <td>广西</td>
					                                                                        <td></td>
					                                                                        <td>43534543</td>
					                                                                        <td>3423wdd@163.com</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="24" clientname="姚先生" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="24" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>蔡女士</td>
					                                                                        <td>女</td>
					                                                                        <td>北京</td>
					                                                                        <td>想买房</td>
					                                                                        <td>43436546</td>
					                                                                        <td>28324@qq.com</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="25" clientname="蔡女士" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="25" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>刘女士</td>
					                                                                        <td>女</td>
					                                                                        <td>未知</td>
					                                                                        <td>别墅、大户型</td>
					                                                                        <td>3432432</td>
					                                                                        <td>未知</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="30" clientname="刘女士" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="30" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>312</td>
					                                                                        <td>男</td>
					                                                                        <td>123</td>
					                                                                        <td>大户型</td>
					                                                                        <td>123</td>
					                                                                        <td>123</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="33" clientname="312" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="33" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr><tr>
					                                                                        <td>孙女士</td>
					                                                                        <td>女</td>
					                                                                        <td>未知</td>
					                                                                        <td>想买房、大户型、中户型</td>
					                                                                        <td>未知</td>
					                                                                        <td>未知</td>
					                                                                        <td>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-normal clientChatLog" clientid="39" clientname="孙女士" name="" id="">聊天记录</button>
					                                                                            <button type="button" class="layui-btn layui-btn-small layui-btn-warm" clientid="39" name="" id="">详细信息</button>
					                                                                        </td>
					                                                                    </tr></tbody>
					                                    </table>
					                                </div>
					                            </td>
					                        </tr>
					                    </tbody>
					                </table>
					            <!-- </div> -->
					        </div>
					    </div>
					</div>
				</div>
				<div class="full" style="display: none">
					<div style="position: absolute;left: 20px;right: 20px;top: 10px;bottom: 20px;">
						<fieldset class="layui-elem-field">
						  <legend>基本设置</legend>
						  <div class="layui-field-box">
						    <form class="layui-form" action="">
								<div class="layui-form-item">
								  <label class="layui-form-label">对外昵称</label>
								  <div class="layui-input-block">
								    <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="layui-input" value="小张">
								  </div>
								</div>
								<div class="layui-form-item">
								  <label class="layui-form-label">自动接入</label>
								  <div class="layui-input-block">
								    <input type="checkbox" name="zdjr" lay-skin="switch" lay-text="开启|关闭">
								  </div>
								</div>
								<div class="layui-form-item">
								  <label class="layui-form-label">最大会话数</label>
								  <div class="layui-input-block" style="width: 200px">
								    <select name="largest-conversation-num" lay-verify="">
								      <option value="">5</option>
								      <option value="5">5</option>
								      <option value="10">10</option>
								      <option value="15">15</option>
								      <option value="20">20</option>
								      <option value="20">30</option>
								      <option value="99">不限</option>
								    </select>    
								  </div>
								</div>
								<div class="layui-form-item">
								  <label class="layui-form-label">自动问候</label>
								  <div class="layui-input-block">
								    <div style="float: left;">
								    	<input type="checkbox" name="zdwh" lay-skin="switch" lay-text="开启|关闭" checked>
								    </div>
								    <div style="float: left;padding-top: 10px;padding-left: 1em;color: grey;">（当有新会话接入时自动发送问候文本）</div>
								  </div>
								</div>
								<div class="layui-form-item">
								  <label class="layui-form-label">问候文本</label>
								  <div class="layui-input-block">
								    <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="layui-input" value="欢迎光临">
								  </div>
								</div>
						    </form>
						  </div>
						</fieldset>
						<button class="layui-btn" style="width: 100px;">保存</button>
						<button class="layui-btn layui-btn-primary" style="width: 100px;">重置</button>
					</div>
				</div>


			</div>
			<div id="notificationApp">
				<div id="notification">
					<div class="notification-title"><i class="layui-icon icon" style="padding-right:5px;">&#xe60b;</i>{{ notificationList.length>0 ? notificationList[notificationList.length-1].title
						: null }}</div>
					<div class="notification-off" onclick="hideNotification()"><i class="layui-icon icon">&#x1006;</i></div>
					<div class="notification-msg">{{ notificationList.length>0 ? notificationList[notificationList.length-1].notiContent : null }}</div>
				</div>
				<div id="notificationCenter">
					<div class="notificationCenter-title">通知中心</div>
					<div class="notification-off" onclick="closeNotificationCenter()"><i class="layui-icon icon">&#x1006;</i></div>
					<hr style="margin:3px 0;">
					<div class="notificationCenter-list">
						<div class="notificationCenter-item" v-for="notification in notificationList">
							<div class="notification-title"><i class="layui-icon icon" style="padding-right:5px;">&#xe60b;</i>{{ notification.title }}</div>
							<div>{{ notification.notiContent }}</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="statusBar" id="statusBar">
			<span>当前会话数：{{ serviceInfo.conversationCount }}</span>
			<span>队列等待人数：{{ serviceInfo.queuePeopleCount }}</span>
			<span>工号：{{ serviceInfo.employeeId }}</span>
			<span>组别：{{ serviceInfo.groupName }}</span>
			<span>内部名称：{{ serviceInfo.serviceName }}</span>
			<span>对外昵称：{{ serviceInfo.nickName }}</span>
			<div id="notificationCenterBtn" onclick="openNotificationCenter()">通知中心<span id="notificationNumTag">(0)</span></div>
		</div>

	</div>
</body>
<div id="clientSearch">
	<div>
		<div class="layui-input-inline" style="width: calc(80% - 6px);">
			<input type="text" id="clientSearchKeyword" name="keyword" placeholder="请输入客户名称" class="layui-input">
		</div>
		<button type="button" onclick="searchClientByName()" class="layui-btn" style="width: 20%;"><i class="layui-icon icon" style="line-height: inital;"></i></button>
	</div>
	<ul id="clientSearch-list">
		<li v-for="client in matchList" :class="{ 'clientSearch-li-chosed': selectedClient==client }" @click="selectClient(client)">
			<i class="layui-icon icon">&#xe612;</i><span class="clientSearch-li-name">{{ client.name }}</span>
		</li>
		<!-- <li><i class="layui-icon icon">&#xe612;</i><span class="clientSearch-li-name">李四</span></li>
		<li class="clientSearch-li-chosed"><i class="layui-icon icon">&#xe612;</i><span class="clientSearch-li-name">高育良</span></li> -->
	</ul>
	<center>
		<button type="button" class="layui-btn" style="width:45%;" @click="confirm(selectedClient)">确定</button>
		<button type="button" class="layui-btn layui-btn-primary" style="width:45%;" @click="cancel()">取消</button>
	</center>
</div>

<div id="transferWindow">
	<div id="transfer-serviceList">
		<div v-for="group in groupList">
			<div class="transfer-item" :class="{'transfer-item-chosed': selected == group}" @click="chooseGroup(group)"><i class="layui-icon" @click="expand(group)">{{ group.expanded ? '&#xe625;' : '&#xe623;' }}</i><i class="layui-icon">&#xe622;</i>{{
				group.name }}</div>
			<div class="transfer-item" v-if="group.expanded" v-for="member in group.onlineMembers" @click="chooseMember(member)" :class="{'transfer-item-chosed': selected == member}">
				<i class="layui-icon transfer-member-avatar">&#xe612;</i>{{ member.name }}
			</div>
		</div>
	</div>
	<center>
		<button type="button" class="layui-btn" style="width:45%;" @click="confirm()">确定</button>
		<button type="button" class="layui-btn layui-btn-primary" style="width:45%;" @click="cancel()">取消</button>
	</center>
</div>

</html>

<script src="./js/src/service/serviceMessage.js"></script>
<script src="./js/src/service/clientService.js"></script>
<script src="./js/src/service/serviceHandle.js"></script>
<script>
	let isInChatTab = true;

	let DoubleBarMode = true;

	function hideNotification() {
		$('#notification').animate({
			right: "-400px"
		});
	}

	function showNotification() {
		$('#notification').animate({
			right: "0px"
		});
		setTimeout(hideNotification, 5000);
	}

	function openNotificationCenter() {
		$('#notificationCenter').animate({
			bottom: "0px"
		});
	}

	function closeNotificationCenter() {
		$('#notificationCenter').animate({
			bottom: "-600px"
		});
	}

	function hideBBar() {
		if (DoubleBarMode) {
			$('#chatRight-b').hide();
			// dom操作
			$('#chatRight-a-content').append($('#chatRight-b-content-1'));
			$('#chatRight-a-content').append($('#chatRight-b-content-2'));
			$('#chatRight-a-tab').append($('<li id="tempTab1"></li>').text('常用语'));
			$('#chatRight-a-tab').append($('<li id="tempTab2"></li>').text('聊天记录'));
			$('#chatRight-a').width('100%');

			DoubleBarMode = false;
		}
	}

	function showBBar() {
		if (DoubleBarMode == false) {
			// dom操作
			$('#chatRight-b-content').prepend($('#chatRight-b-content-2'));
			$('#chatRight-b-content').prepend($('#chatRight-b-content-1'));
			$('#tempTab1').remove();
			$('#tempTab2').remove();
			element.tabChange('chatRight-a', 'tab-zhishiku');
			element.tabChange('chatRight-b', 'tab-changyongyu');
			$('#chatRight-a').width('50%');
			$('#chatRight-b').width('50%').show();

			DoubleBarMode = true;
		}

	}

	function checkRightWidth() {
		if ($('#chatRight').width() < 400) {
			hideBBar();
		} else {
			showBBar();
		}
	}



	let leftNavBtnList = $('.leftNavBar').children();
	for (let i = 0; i < leftNavBtnList.length; i++) {
		leftNavBtnList[i].index = i;
	}
	leftNavBtnList.click(function () {
		$('#content').children().hide();
		$($('#content').children()[this.index]).show();
		leftNavBtnList.attr("class", "tab");
		$(this).addClass('chosed');
		if (this.index == 0) {
			isInChatTab = true;
		} else {
			isInChatTab = false;
		}
	});

	//调大小
	$('#chatLeft').resizable({
		handles: 'e',
		/*maxWidth:500,
		minWidth:230,*/
		resize: function (event, ui) {
			$('#chatMain').width($('#content').width() - ui.size.width - $('#chatRight').width());
		}
	});
	$('#chatMain').resizable({
		handles: 'e',
		/*maxWidth:($('#content').width()-$('#chatLeft').width())*0.7,
		minWidth:450,*/
		resize: function (event, ui) {
			$('#chatRight').width($('#content').width() - ui.size.width - $('#chatLeft').width());
			checkRightWidth();
		}
	});
	$(window).resize(function () {
		let bili = $('#content').width() / ($('#chatLeft').width() + $('#chatMain').width() + $('#chatRight').width());
		$('#chatLeft').width($('#chatLeft').width() * bili);
		$('#chatMain').width($('#chatMain').width() * bili);
		$('#chatRight').width($('#chatRight').width() * bili);

		checkRightWidth();
	});
	$('body').bind('resize', function () {
		return false;
	})

	function openClientSearch() {
		layerClientSearchIndex = layer.open({
			type: 1,
			content: $('#clientSearch'),
			title: '改变当前会话指向用户',
		});
	}

	function openTransferWindow() {
		//拿数据
		$.ajax({
			type: "get",
			url: "/api/onlineGroup",
			dataType: "json",
			success: function (data) {
				transferApp.groupList = data;
			}
		})

		layerTransferWindowIndex = layer.open({
			type: 1,
			content: $('#transferWindow'),
			title: '转接会话',
		});
	}

	//echarts 统计图表
	let chart24h=echarts.init(document.getElementById('dayInfo'));
	let chart24h_option = {
		
		tooltip: {
			trigger: 'axis'
		},
		legend: {
			data:['个人','平台']
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: {
			type: 'category',
			boundaryGap: false,
			data: [
				'12:00',
				'13:00',
				'14:00',
				'15:00',
				'16:00',
				'17:00',
				'18:00',
				'19:00',
				'20:00',
				'21:00',
				'22:00',
				'23:00',
				'00:00',
				'1:00',
				'2:00',
				'3:00',
				'4:00',
				'5:00',
				'6:00',
				'7:00',
				'8:00',
				'9:00',
				'10:00',
				'11:00',
				]
		},
		yAxis: {
			type: 'value',
			name: '会话数'
		},
		series: [
			{
				name:'个人',
				type:'line',
				smooth:true,
				data:[19,18,21,29,24,22,32,48,
				49,41,37,18,11,0,0,0,
				0,0,0,0,13,16,17,18]
			},
			{
				name:'平台',
				type:'line',
				smooth:true,
				data:[86, 95, 107, 139, 119, 101, 136, 204, 200, 174, 157, 91, 55, 0, 0, 0, 0, 0, 0, 0, 54, 83, 79, 96]
			},
		]
	};
	chart24h.setOption(chart24h_option);


	let chartWeek=echarts.init(document.getElementById('weekInfo'));
	let chartWeek_option = {
		
		tooltip: {
			trigger: 'axis'
		},
		legend: {
			data:['平台会话数']
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: {
			type: 'category',
			name: '日期',
			boundaryGap: false,
			data: [
				'8月3日',
				'8月4日',
				'8月5日',
				'8月6日',
				'8月7日',
				'8月8日',
				'8月9日',
				]
		},
		yAxis: {
			type: 'value',
			name: '会话数'
		},
		series: [
			{
				name:'平台会话数',
				type:'line',
				smooth:true,
				data:[186, 195, 107, 139, 119, 101, 136]
			},
		]
	};
	chartWeek.setOption(chartWeek_option);

	$('#navtab-dashboard').click(function(){
		chart24h.resize();
		chartWeek.resize();
	});
	$(window).resize(function(){
		chart24h.resize();
		chartWeek.resize();
	});




	var $container;
	function waterfall()
	{
	    $container = $('#masonry');
	    $container.imagesLoaded(function()
	        {
	            $container.masonry(
	                {
	                    itemSelector: '.col-lg-3',
	                    gutter: 0,
	                    isAnimated: true,
	                }
	            );
	        }
	    );
	}
	waterfall();
	$('#navtab-knowledge').click(function(){
		$container.masonry();
	});
</script>